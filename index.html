<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MEDIGUARD - 약부터 영양제까지, 복용의 모든 순간을 안전하게</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --header-height: 56px;
      --concept: #423FEB;
      --concept-dark: #3633d4;
      --blue: #423FEB;
      --blue-dark: #3633d4;
      --purple: #423FEB;
      --purple-light: #6b69f0;
      --purple-bg: #f0effe;
      --gray-900: #1f2937;
      --gray-600: #4b5563;
      --gray-500: #6b7280;
      --gray-400: #9ca3af;
      --white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      height: 100%;
      scroll-snap-type: y mandatory;
      scroll-behavior: smooth;
      scroll-padding-top: var(--header-height);
    }

    body {
      font-family: 'Noto Sans KR', -apple-system, sans-serif;
      color: var(--gray-900);
      background: #ffffff;
      line-height: 1.6;
      overflow-x: hidden;
      overflow-y: auto;
    }

    /* Page containers - 한 화면에 한 페이지만 (뷰포트 고정, 적응형) */
    .page {
      position: relative;
      min-height: 100vh;
      min-height: 100dvh;
      height: 100vh;
      height: 100dvh;
      max-height: 100vh;
      max-height: 100dvh;
      box-sizing: border-box;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    /* 전체 배경 통일, 구분선 */
    .page-1 { background: #f0f4ff; }
    .page-2 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-3 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-4 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-5 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-6 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-7 { background: #f0f4ff; border-top: 1px solid rgba(0, 0, 0, 0.14); }
    .page-1 {
      padding-top: 0;
    }
    .page-1 .hero {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 0;
      padding-bottom: 0;
      overflow: hidden;
    }
    .page-1 .hero-content {
      margin-top: 14vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .page-2 .problem-page-section,
    .page-3 .problem-page-section,
    .page-4 .problem-page-section {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
    }
    .page-6 .problem-solution-section {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      padding: clamp(36px, 7.5vh, 72px) clamp(16px, 4vw, 24px) clamp(24px, 4vw, 48px);
    }
    .page-6 .problem-solution-section .ps-inner {
      flex: 0 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .page-5 .data-section {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 0 clamp(16px, 4vw, 32px);
      text-align: center;
    }
    .page-5 .data-section .data-section-inner {
      flex: 0 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      margin-top: -8vh;
    }
    .page-5 .data-section .data-heading {
      margin: 0 0 clamp(8px, 1.5vh, 16px);
      font-size: clamp(1.25rem, 3.5vw, 1.75rem);
      font-weight: 700;
      color: var(--gray-900);
      letter-spacing: -0.02em;
      line-height: 1.4;
    }
    .page-5 .data-section .data-catchphrase {
      margin: 0 0 clamp(20px, 4vh, 36px);
      font-size: clamp(0.95rem, 2.2vw, 1.1rem);
      color: var(--gray-600);
      font-weight: 500;
    }
    .page-5 .data-section .data-search-btns {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: clamp(10px, 2vw, 16px);
      margin-top: clamp(28px, 5vh, 48px);
    }
    .page-5 .data-section .data-search-btn {
      display: inline-block;
      padding: clamp(10px, 1.8vh, 14px) clamp(20px, 4vw, 28px);
      background: var(--concept);
      color: #fff;
      font-size: clamp(0.9rem, 2vw, 1rem);
      font-weight: 600;
      border-radius: 12px;
      text-decoration: none;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 12px rgba(66, 63, 235, 0.25);
    }
    .page-5 .data-section .data-search-btn:hover {
      background: var(--concept-dark);
    }
    /* 약물 검색 모달 */
    .search-modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      z-index: 200;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
    }
    .search-modal-overlay.is-open {
      display: flex;
    }
    .search-modal {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 24px 48px rgba(0, 0, 0, 0.18);
      width: 100%;
      max-width: 420px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .search-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      border-bottom: 1px solid #e5e7eb;
    }
    .search-modal-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: var(--gray-900);
    }
    .search-modal-close {
      width: 36px;
      height: 36px;
      border: none;
      background: #f3f4f6;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.25rem;
      line-height: 1;
      color: var(--gray-600);
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .search-modal-close:hover {
      background: #e5e7eb;
      color: var(--gray-900);
    }
    .search-modal-body {
      padding: 20px;
    }
    .search-modal-input {
      width: 100%;
      padding: 14px 16px;
      font-size: 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      box-sizing: border-box;
      font-family: inherit;
    }
    .search-modal-input:focus {
      outline: none;
      border-color: var(--concept);
    }
    .search-modal-input::placeholder {
      color: var(--gray-400);
    }
    .search-modal-results {
      margin-top: 12px;
      max-height: 280px;
      overflow-y: auto;
      border: 1px solid #e5e7eb;
      border-radius: 10px;
      background: #fafafa;
    }
    .search-modal-result-item {
      padding: 12px 16px;
      font-size: 0.95rem;
      color: var(--gray-900);
      border-bottom: 1px solid #eee;
      cursor: default;
    }
    .search-modal-result-item:last-child {
      border-bottom: none;
    }
    .search-modal-loading,
    .search-modal-empty {
      padding: 20px;
      text-align: center;
      font-size: 0.9rem;
      color: var(--gray-500);
    }
    .page-5 .data-section .data-circles {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: clamp(16px, 4vw, 40px);
      flex-wrap: wrap;
      margin-bottom: clamp(24px, 5vh, 48px);
    }
    .page-5 .data-section .data-circle {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: clamp(140px, 28vw, 220px);
      height: clamp(140px, 28vw, 220px);
      border-radius: 50%;
      background: var(--concept);
      border: none;
      box-shadow: 0 4px 20px rgba(66, 63, 235, 0.35);
      flex-shrink: 0;
    }
    .page-5 .data-section .data-circle-num {
      font-size: clamp(2rem, 5.5vw, 3rem);
      font-weight: 800;
      color: #fff;
      letter-spacing: -0.03em;
      line-height: 1.2;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .page-5 .data-section .data-circle-label {
      margin-top: 6px;
      font-size: clamp(0.65rem, 1.6vw, 0.8rem);
      color: rgba(255, 255, 255, 0.95);
      line-height: 1.25;
      max-width: 100px;
      text-align: center;
    }
    .page-5 .data-section .data-circle-label-nowrap {
      white-space: nowrap;
      max-width: none;
    }
    .page-5 .data-section .data-body {
      max-width: min(720px, 94vw);
      margin: 0 0 clamp(4px, 0.8vh, 8px);
      font-size: clamp(0.9rem, 2.2vh, 1.1rem);
      color: var(--gray-600);
      line-height: 1.7;
    }
    .page-5 .data-section .data-source {
      margin: 0;
      font-size: clamp(0.8rem, 1.8vw, 0.95rem);
      color: var(--gray-500);
    }
    .page-5 .data-section .testimonial-heading {
      margin: clamp(32px, 6vh, 56px) 0 clamp(10px, 1.5vh, 16px);
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      font-weight: 700;
      color: var(--gray-900);
    }
    .page-5 .data-section .testimonial-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: center;
      gap: clamp(8px, 1.5vw, 14px);
      max-width: min(900px, 96vw);
      margin: 0 auto;
    }
    .page-5 .data-section .testimonial-card {
      flex: 1;
      min-width: min(260px, 90vw);
      max-width: 320px;
      background: #fff;
      border-radius: 10px;
      padding: clamp(10px, 1.5vw, 14px) clamp(12px, 2vw, 16px);
      border-left: 4px solid var(--concept);
      box-shadow: 0 2px 8px rgba(66, 63, 235, 0.08);
    }
    .page-5 .data-section .testimonial-quote {
      margin: 0 0 6px;
      font-size: clamp(0.8rem, 1.8vw, 0.9rem);
      color: var(--gray-900);
      line-height: 1.5;
    }
    .page-5 .data-section .testimonial-author {
      margin: 0;
      font-size: clamp(0.7rem, 1.5vw, 0.8rem);
      color: var(--gray-500);
      font-weight: 500;
    }
    .page-7 .event-section {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
    }
    .page-7 {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* 메뉴판 밑에서 1페이지 시작: spacer가 헤더 높이만큼 차지, 스크롤 0에서 스냅 */
    .header-spacer {
      height: var(--header-height);
      flex-shrink: 0;
      width: 100%;
      scroll-snap-align: start;
      scroll-snap-stop: always;
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-height);
      background: var(--white);
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      z-index: 100;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--concept);
      letter-spacing: -0.02em;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .header-nav a {
      font-size: 0.9rem;
      color: var(--gray-600);
      text-decoration: none;
      font-weight: 500;
    }

    .header-nav a:hover {
      color: var(--gray-900);
    }

    /* Hero - gridi 스타일 비율: 큰 제목, 읽기 좋은 본문 */
    .hero {
      padding: clamp(20px, 5vh, 48px) 16px clamp(13px, 2.4vh, 26px);
      text-align: center;
    }

    .hero h1 {
      font-size: clamp(1.5rem, 5.5vw, 2rem);
      font-weight: 700;
      line-height: 1.3;
      color: var(--gray-900);
      margin-bottom: clamp(14px, 2.5vh, 28px);
      letter-spacing: -0.02em;
    }

    .hero .cta {
      display: inline-block;
      padding: 14px 32px;
      background: var(--concept);
      color: var(--white);
      font-size: 1rem;
      font-weight: 600;
      border-radius: 12px;
      text-decoration: none;
      margin-top: clamp(24px, 5vh, 48px);
      margin-bottom: clamp(10px, 2vh, 16px);
      border: none;
      cursor: pointer;
      transition: background 0.2s;
      box-shadow: 0 2px 8px rgba(66, 63, 235, 0.35);
    }

    .hero .cta:hover {
      background: var(--concept-dark);
    }

    .hero .cta-video {
      display: inline-block;
      margin-top: 0;
      margin-bottom: clamp(24px, 5vh, 48px);
      font-size: 0.95rem;
      font-weight: 500;
      color: var(--concept);
      text-decoration: none;
      border-bottom: 1px solid var(--concept);
    }

    .hero .cta-video:hover {
      color: var(--concept-dark);
      border-bottom-color: var(--concept-dark);
    }

    /* 1페이지 그림 - 휴대폰 시뮬레이터 스타일 (베젤, 그림자 없음) */
    .phone-mockup {
      max-width: 280px;
      margin: 0 auto;
      background: #000;
      border-radius: 36px;
      padding: 8px;
      border: 0.5px solid #000;
      overflow: visible;
    }

    .phone-mockup .hero-ui-img {
      display: block;
      width: 100%;
      height: auto;
      max-height: 70vh;
      object-fit: contain;
      border-radius: 24px;
      vertical-align: top;
    }

    /* 2페이지 - 사용자 페인포인트 중심 */
    .question-section {
      position: relative;
      min-height: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: clamp(28px, 6vh, 56px) clamp(24px, 5vw, 40px);
      overflow-y: auto;
    }

    .question-section::before {
      content: '';
      position: absolute;
      inset: 0;
      background: #f0f0f2;
    }
    .page-2 .question-section::before { background: #ebebef; }
    .page-3 .question-section::before { background: #f5f5f8; }
    .page-4 .question-section::before { background: #ebebef; }

    .question-section::after {
      content: '';
      position: absolute;
      inset: 0;
      background: transparent;
    }

    .question-section .target-title {
      position: relative;
      z-index: 1;
      display: inline-block;
      margin: 0 0 clamp(24px, 5vh, 40px);
      padding: 10px 20px;
      font-size: clamp(0.9rem, 2.2vw, 1rem);
      font-weight: 700;
      color: #ffffff;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      background: var(--concept);
      border-radius: 999px;
    }

    .question-section .target-blocks {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: row;
      gap: clamp(12px, 2.5vw, 20px);
      width: 100%;
      max-width: min(960px, 94vw);
      flex-wrap: wrap;
    }

    .question-section .target-block {
      flex: 1;
      min-width: min(260px, 100%);
      margin-bottom: 0;
      padding: clamp(16px, 2.5vh, 24px);
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: 0 4px 24px rgba(0,0,0,0.2);
    }

    .question-section .target-name {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 0 0 clamp(14px, 2.5vh, 20px);
      padding: 0;
      background: none;
      backdrop-filter: none;
      border: none;
      border-radius: 0;
      color: #ffffff;
      font-size: clamp(0.95rem, 2.4vw, 1.1rem);
      font-weight: 700;
      text-shadow: 0 2px 6px rgba(0,0,0,0.35);
    }

    .question-section .target-name .target-num {
      flex-shrink: 0;
      width: 26px;
      height: 26px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: var(--concept);
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 700;
    }

    .question-section .target-problems {
      list-style: none;
      margin: 0;
      padding: 0 0 0 12px;
    }

    .question-section .target-problems li {
      position: relative;
      padding: clamp(8px, 1.2vh, 12px) 0;
      padding-left: 14px;
      color: #ffffff;
      font-size: clamp(0.88rem, 2.2vw, 1rem);
      line-height: 1.5;
      font-weight: 500;
      text-shadow: 0 1px 4px rgba(0,0,0,0.4), 0 0 1px rgba(0,0,0,0.3);
    }

    .question-section .target-problems li::before {
      content: '';
      position: absolute;
      left: 0;
      top: 1.05em;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 0 0 1px rgba(0,0,0,0.2);
    }

    .question-section .target-quote {
      margin: 0 0 10px;
      color: #ffffff;
      font-size: clamp(0.95rem, 2.2vw, 1.05rem);
      line-height: 1.55;
      font-weight: 600;
      text-shadow: 0 1px 4px rgba(0,0,0,0.4);
    }
    .question-section .target-desc {
      margin: 0;
      color: rgba(255,255,255,0.92);
      font-size: clamp(0.85rem, 2vw, 0.95rem);
      line-height: 1.5;
      font-weight: 500;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    /* 2페이지 - 가로 3열 적응형, 컨셉색 포인트 */
    .question-section .target-blocks-flow {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      gap: clamp(12px, 2vw, 24px);
      width: 100%;
      max-width: min(1200px, 94vw);
      min-width: 0;
    }
    .question-section .target-block-flow {
      flex: 1;
      min-width: 0;
      background: #2e2e2e;
      border-radius: 16px;
      padding: clamp(14px, 2.5vh, 20px) clamp(12px, 1.5vw, 20px);
      margin: 0;
      border: 1px solid rgba(255,255,255,0.06);
    }
    .question-section .target-block-flow-first {
      border-color: rgba(66,63,235,0.5);
      box-shadow: 0 0 0 1px rgba(66,63,235,0.2);
    }
    .question-section .target-block-flow + .target-block-flow {
      margin-top: 0;
    }
    .question-section .target-flow-heading {
      margin: 0 0 8px;
      padding: 0;
      border: none;
      font-size: clamp(0.95rem, 1.8vw, 1.1rem);
      font-weight: 700;
      color: #ffffff;
      letter-spacing: -0.02em;
      line-height: 1.35;
    }
    .question-section .target-block-flow .target-subtitle {
      margin: 0 0 10px;
      font-size: clamp(0.8rem, 1.5vw, 0.9rem);
      font-weight: 600;
      color: rgba(255,255,255,0.9);
      line-height: 1.45;
    }
    .question-section .target-block-flow .target-stats {
      margin: 0;
      font-size: clamp(0.72rem, 1.4vw, 0.84rem);
      line-height: 1.55;
      color: rgba(255,255,255,0.65);
    }
    .question-section .target-subtitle .desc-arrow {
      color: var(--concept);
      margin-right: 4px;
      font-weight: 600;
    }

    /* 2·3·4페이지 - Problem 1개씩 단일 카드 */
    .question-section .target-blocks-single {
      display: flex;
      flex-direction: row;
      justify-content: center;
      width: 100%;
      max-width: min(560px, 90vw);
      min-width: 0;
    }
    .question-section .target-blocks-single .target-block-flow {
      flex: 1;
      min-width: 0;
    }
    .question-section .target-blocks-single .target-flow-heading {
      font-size: clamp(1.1rem, 3vw, 1.35rem);
    }
    .question-section .target-blocks-single .target-subtitle {
      font-size: clamp(0.9rem, 2.2vw, 1.02rem);
    }
    .question-section .target-blocks-single .target-stats {
      font-size: clamp(0.84rem, 2vw, 0.96rem);
    }

    /* 2·3·4페이지 - Problem 상단 여백만 적용, 콘텐츠는 위에서부터 */
    .problem-page-section {
      padding: clamp(24px, 7vh, 56px) clamp(16px, 4vw, 32px) clamp(16px, 3vh, 32px) clamp(16px, 4vw, 32px);
      text-align: center;
      min-height: 0;
    }
    .problem-page-label {
      margin: 0 0 clamp(16px, 4vh, 40px);
      padding: clamp(8px, 1.5vh, 12px) clamp(16px, 3vw, 24px);
      display: inline-block;
      font-size: clamp(0.8rem, 2vw, 1rem);
      font-weight: 700;
      color: #ffffff;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      background: var(--concept);
      border-radius: 999px;
    }
    .problem-page-quote {
      margin: 0 0 clamp(8px, 2vh, 16px);
      font-size: clamp(1.1rem, 3vh, 1.65rem);
      font-weight: 700;
      color: var(--gray-900);
      line-height: 1.35;
    }
    .problem-page-answer {
      margin: 0 0 clamp(10px, 2vh, 20px);
      max-width: min(720px, 94vw);
      font-size: clamp(0.8rem, 2vh, 1.05rem);
      color: var(--gray-600);
      line-height: 1.6;
    }
    .problem-page-answer .answer-risk {
      display: block;
      margin-bottom: 10px;
      color: var(--gray-900);
      font-weight: 600;
    }
    .problem-page-answer strong {
      color: var(--concept);
      font-weight: 700;
    }
    .problem-page-answer .answer-risk-red {
      color: #dc2626;
      font-weight: 600;
      white-space: nowrap;
    }
    .problem-page-ui {
      width: 100%;
      max-width: min(260px, 70vw);
      margin: 0 auto;
      flex-shrink: 0;
      min-height: 0;
      padding: clamp(9px, 1.75vh, 16px) 0;
      overflow: visible;
    }
    .problem-page-ui img {
      display: block;
      width: 100%;
      height: auto;
      max-height: min(40vh, 320px);
      object-fit: contain;
      object-position: center;
      border-radius: 20px;
      box-shadow: 0 16px 40px -12px rgba(0,0,0,0.12);
    }
    .problem-page-after-ui {
      margin-top: clamp(14px, 2.5vh, 22px);
      max-width: min(720px, 94vw);
      font-size: clamp(0.85rem, 2vh, 1rem);
      color: var(--gray-600);
      line-height: 1.55;
    }
    .problem-page-after-ui strong {
      color: var(--concept);
      font-weight: 700;
    }

    /* 작은 창: 2·3·4페이지 요소 축소 */
    @media (max-height: 700px) {
      .problem-page-section { padding: clamp(12px, 2vh, 28px) clamp(12px, 3vw, 24px) clamp(8px, 1.5vh, 16px) clamp(12px, 3vw, 24px); }
      .problem-page-label { margin-bottom: clamp(8px, 2vh, 20px); padding: 6px 14px; font-size: 0.75rem; }
      .problem-page-quote { margin-bottom: clamp(4px, 1vh, 10px); font-size: clamp(0.95rem, 2.5vh, 1.2rem); }
      .problem-page-answer { margin-bottom: clamp(5px, 1vh, 10px); font-size: 0.75rem; }
      .problem-page-ui { padding: clamp(4px, 0.75vh, 8px) 0; }
      .problem-page-ui img { max-height: min(28vh, 200px); }
      .problem-page-after-ui { margin-top: clamp(8px, 1.5vh, 12px); font-size: 0.78rem; }
    }
    @media (max-height: 580px) {
      .problem-page-section { padding: clamp(8px, 1vh, 16px) clamp(10px, 2vw, 20px) clamp(6px, 1vh, 12px) clamp(10px, 2vw, 20px); }
      .problem-page-label { margin-bottom: 4px; padding: 4px 12px; font-size: 0.7rem; }
      .problem-page-quote { margin-bottom: 2px; font-size: clamp(0.85rem, 2.2vh, 1rem); }
      .problem-page-answer { margin-bottom: 3px; font-size: 0.7rem; }
      .problem-page-ui { padding: 2px 0; }
      .problem-page-ui img { max-height: min(22vh, 160px); }
      .problem-page-after-ui { margin-top: 4px; font-size: 0.72rem; }
    }
    @media (max-height: 480px) {
      .problem-page-section { padding: clamp(4px, 0.5vh, 8px) clamp(8px, 2vw, 16px) clamp(4px, 1vh, 8px) clamp(8px, 2vw, 16px); }
      .problem-page-label { margin-bottom: 2px; padding: 3px 10px; font-size: 0.65rem; }
      .problem-page-quote { margin-bottom: 1px; font-size: clamp(0.75rem, 2vh, 0.9rem); }
      .problem-page-answer { margin-bottom: 2px; font-size: 0.65rem; }
      .problem-page-ui { padding: 1px 0; }
      .problem-page-ui img { max-height: min(18vh, 120px); }
      .problem-page-after-ui { margin-top: 3px; font-size: 0.65rem; }
    }

    @media (max-height: 700px) {
      .page-1 .hero-content { margin-top: 4vh; }
      .hero { padding: clamp(8px, 2vh, 20px) 16px; }
      .hero h1 { font-size: clamp(1.2rem, 4vw, 1.6rem); margin-bottom: 10px; }
      .hero .cta { padding: 10px 24px; font-size: 0.9rem; margin-top: 12px; }
      .hero .cta-video { margin-bottom: 12px; font-size: 0.85rem; }
      .phone-mockup { max-width: 200px; }
    }
    @media (max-height: 580px) {
      .page-1 .hero-content { margin-top: 2vh; }
      .hero { padding: 4px 16px 8px; }
      .hero h1 { font-size: clamp(1rem, 3.5vw, 1.3rem); margin-bottom: 6px; }
      .hero .cta { padding: 8px 20px; font-size: 0.8rem; margin-top: 8px; }
      .hero .cta-video { margin-bottom: 8px; font-size: 0.8rem; }
      .phone-mockup { max-width: 160px; }
    }
    @media (max-height: 700px) {
      .problem-solution-section { padding: clamp(24px, 4.5vh, 42px) 16px 16px 16px; }
      .problem-solution-section .ps-heading { font-size: clamp(1rem, 3vw, 1.3rem); margin-bottom: 8px; }
      .problem-solution-section .ps-desc { margin-bottom: 12px; font-size: 0.85rem; }
      .problem-solution-section .ps-media { height: min(38vh, 400px); margin-bottom: 12px; }
      .problem-solution-section .cta { padding: 10px 20px; font-size: 0.9rem; }
      .event-section { padding: 6px 12px; }
      .event-section h2 { font-size: 1.1rem; }
      .event-section .event-desc { font-size: 0.85rem; margin-bottom: 12px; }
      .event-step { padding: 12px; }
      .event-step .step-num { font-size: 0.7rem; }
      .event-step .step-text { font-size: 0.9rem; }
    }
    @media (max-height: 580px) {
      .problem-solution-section { padding: clamp(18px, 3.6vh, 30px) 12px 10px 12px; }
      .problem-solution-section .ps-heading { font-size: 0.95rem; margin-bottom: 4px; }
      .problem-solution-section .ps-desc { margin-bottom: 8px; font-size: 0.8rem; }
      .problem-solution-section .ps-media { height: min(32vh, 340px); margin-bottom: 8px; }
      .problem-solution-section .cta { padding: 8px 16px; font-size: 0.8rem; }
      .event-section { padding: 4px 10px; }
      .event-section .event-badge { font-size: 0.75rem; }
      .event-section h2 { font-size: 1rem; }
      .event-section .event-desc { font-size: 0.8rem; margin-bottom: 8px; }
      .event-steps { gap: 10px; }
      .event-step { padding: 10px; }
      .event-step .step-num { font-size: 0.65rem; }
      .event-step .step-text { font-size: 0.82rem; }
    }

    /* 5페이지 - 서비스 작동 영상 */
    .problem-solution-section {
      padding: clamp(36px, 7.5vh, 72px) clamp(16px, 4vw, 24px) clamp(16px, 3vh, 32px) clamp(16px, 4vw, 24px);
      text-align: center;
      background: transparent;
    }
    .problem-solution-section .ps-heading {
      margin: 0 0 clamp(20px, 4vh, 32px);
      font-size: clamp(1.25rem, 3.5vw, 1.6rem);
      font-weight: 700;
      color: var(--gray-900);
      letter-spacing: -0.02em;
    }
    .problem-solution-section .ps-desc {
      display: none;
    }
    .problem-solution-section .ps-media-group {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: clamp(32px, 8vw, 80px);
      flex-wrap: wrap;
    }
    .problem-solution-section .ps-media-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .problem-solution-section .ps-media-arrow {
      font-size: clamp(1.5rem, 4vw, 2.25rem);
      font-weight: 700;
      color: var(--concept);
      line-height: 1;
      flex-shrink: 0;
    }
    .problem-solution-section .ps-media {
      width: auto;
      max-width: min(360px, 92vw);
      height: min(78vh, 800px);
      aspect-ratio: 886 / 1920;
      margin: 0 auto clamp(24px, 4vh, 36px);
      background: #f0f4ff;
      border-radius: 16px;
      overflow: hidden;
    }
    .problem-solution-section .ps-media-group .ps-media {
      width: clamp(140px, 28vw, 220px);
      height: auto;
      aspect-ratio: 886 / 1920;
      margin: 0;
    }
    @media (max-height: 700px) {
      .page-6 .problem-solution-section .ps-inner {
        transform: scale(0.9);
        transform-origin: top center;
      }
    }
    @media (max-height: 580px) {
      .page-6 .problem-solution-section .ps-inner {
        transform: scale(0.75);
        transform-origin: top center;
      }
    }
    @media (max-height: 480px) {
      .page-6 .problem-solution-section .ps-inner {
        transform: scale(0.62);
        transform-origin: top center;
      }
    }
    @media (max-width: 900px) {
      .page-6 .problem-solution-section .ps-inner {
        transform: scale(0.82);
        transform-origin: top center;
      }
    }
    @media (max-width: 600px) {
      .page-6 .problem-solution-section .ps-inner {
        transform: scale(0.65);
        transform-origin: top center;
      }
    }
    .problem-solution-section .ps-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .problem-solution-section .cta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 14px 28px;
      background: var(--concept);
      color: #ffffff;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 12px;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(66,63,235,0.35);
    }
    .problem-solution-section .cta:hover {
      background: var(--concept-dark);
    }

    /* Risk section - gridi 비율 */
    .risk-section {
      padding: clamp(20px, 4vh, 40px) 16px;
      text-align: center;
    }

    .risk-section h2 {
      font-size: clamp(1.25rem, 3.5vw, 1.5rem);
      font-weight: 700;
      color: var(--gray-900);
      line-height: 1.35;
      margin-bottom: clamp(20px, 3vh, 28px);
      letter-spacing: -0.02em;
    }

    .risk-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin: 0 0 20px;
      width: 100%;
    }

    .risk-card {
      background: var(--purple-bg);
      border-radius: 16px;
      padding: 20px 16px;
      text-align: center;
    }

    .risk-card .label {
      font-size: 0.875rem;
      color: var(--gray-600);
      margin-bottom: 6px;
      line-height: 1.35;
    }

    .risk-card .value {
      font-size: 1.125rem;
      font-weight: 700;
      color: var(--purple);
      margin-bottom: 10px;
      line-height: 1.3;
    }

    .risk-card .chart {
      height: 48px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 8px;
    }

    .risk-card .bar {
      width: 24px;
      background: var(--purple-light);
      border-radius: 4px;
    }

    .risk-card .bar.tall {
      height: 100%;
      background: var(--purple);
    }

    .risk-card .bar.short {
      height: 50%;
    }

    .risk-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .risk-dots span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--purple-light);
    }

    .risk-dots span:first-child {
      background: var(--purple);
    }

    /* Solution section - gridi 비율 */
    .solution-section {
      padding: clamp(20px, 4vh, 40px) 16px;
      text-align: center;
      background: #f0f0f2;
    }

    .solution-section .sub {
      font-size: 0.9rem;
      color: var(--gray-600);
      margin-bottom: 8px;
      line-height: 1.35;
    }

    .solution-section h2 {
      font-size: clamp(1.15rem, 3vw, 1.4rem);
      font-weight: 700;
      color: var(--gray-900);
      line-height: 1.4;
      margin-bottom: clamp(16px, 2.5vh, 24px);
      letter-spacing: -0.02em;
    }

    .solution-section .cta {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 14px 24px;
      background: var(--blue);
      color: var(--white);
      font-size: 1rem;
      font-weight: 600;
      border-radius: 9999px;
      text-decoration: none;
      margin-bottom: 16px;
      border: none;
      cursor: pointer;
    }

    .solution-section .desc {
      font-size: 0.9rem;
      color: var(--gray-600);
      line-height: 1.5;
      margin-bottom: 20px;
      margin-left: auto;
      margin-right: auto;
      max-width: 360px;
    }

    .solution-section .report-icon {
      width: 44px;
      height: 44px;
      margin: 0 auto;
      background: var(--blue);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--white);
      font-size: 1.35rem;
    }

    /* Instagram event - 한 화면 */
    .event-section {
      padding: clamp(8px, 1.2vh, 14px) 16px;
      text-align: center;
      position: relative;
      overflow-y: auto;
      background: transparent;
    }

    .event-section::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(167, 139, 250, 0.15) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.12) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(250, 204, 21, 0.08) 0%, transparent 30%);
      pointer-events: none;
    }

    .event-badge {
      display: inline-block;
      background: var(--purple);
      color: var(--white);
      font-size: 0.85rem;
      font-weight: 600;
      padding: 8px 16px;
      border-radius: 9999px;
      margin-bottom: 14px;
      position: relative;
      z-index: 1;
    }

    .event-section h2 {
      font-size: clamp(1.25rem, 3vw, 1.5rem);
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      letter-spacing: -0.02em;
    }

    .event-section .event-desc {
      font-size: 0.95rem;
      color: var(--gray-600);
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
      line-height: 1.4;
    }

    .event-steps {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 100%;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    .event-step {
      background: var(--white);
      border-radius: 16px;
      padding: 18px 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      text-align: left;
    }

    .event-step .step-num {
      display: inline-block;
      background: var(--purple-bg);
      color: var(--purple);
      font-size: 0.8rem;
      font-weight: 700;
      padding: 4px 10px;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .event-step .step-text {
      font-size: 1rem;
      color: var(--gray-900);
      margin-bottom: 10px;
      line-height: 1.45;
    }

    .event-step .mock-ui {
      background: #f9fafb;
      border-radius: 12px;
      padding: 14px;
      font-size: 0.875rem;
      color: var(--gray-600);
      line-height: 1.4;
    }

    .event-step .mock-ui .follow-btn {
      display: inline-block;
      background: var(--blue);
      color: var(--white);
      padding: 6px 14px;
      border-radius: 8px;
      margin-top: 8px;
      font-weight: 500;
    }

    .event-step .mock-ui .dm-bubble {
      background: var(--white);
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 10px 14px;
      margin-top: 8px;
    }

    /* Footer - gridi 비율 */
    footer {
      padding: 20px 16px;
      text-align: center;
    }

    footer p {
      font-size: 0.8rem;
      color: var(--gray-400);
      line-height: 1.45;
    }
  </style>
</head>
<body>
  <header>
    <span class="logo">MEDIGUARD</span>
    <nav class="header-nav">
      <a href="#">서비스 소개하기</a>
      <a href="#">문의하기</a>
    </nav>
  </header>

  <main>
    <div class="header-spacer" aria-hidden="true"></div>
    <div class="page page-1">
    <section class="hero">
      <div class="hero-content">
        <h1>약부터 영양제까지,<br />복용의 모든 순간을 안전하게</h1>
        <a href="#report" class="cta">베타테스트 신청하기</a>
        <a href="#report" class="cta-video">서비스 영상 보기</a>
        <div class="phone-mockup">
          <img src="page1_ui.png" alt="메디가드 앱 UI" class="hero-ui-img" />
        </div>
      </div>
    </section>
    </div>

    <div class="page page-2">
    <section class="problem-page-section">
      <h2 class="problem-page-label">Problem</h2>
      <p class="problem-page-quote">"약, 그냥 시간 맞춰 먹기만 하면 되는 걸까요?"</p>
      <p class="problem-page-answer"><span class="answer-risk">안 됩니다. 약물 정보 없이 복용할 경우 <span class="answer-risk-red">부작용·입원 위험이 약 50% 증가합니다.</span></span></p>
      <div class="problem-page-ui">
        <img src="page1_ui.png" alt="메디가드 앱 UI - 약 정보 확인" />
      </div>
      <p class="problem-page-after-ui">메디가드는 복용 중인 <strong>약의 정보·주의사항</strong>을 앱에서 한눈에 확인할 수 있게 해요.<br />알람만 맞추는 게 아니라, 어떤 약인지·먹을 때 주의할 점은 무엇인지 바로 볼 수 있습니다.</p>
    </section>
    </div>

    <div class="page page-3">
    <section class="problem-page-section">
      <h2 class="problem-page-label">Problem</h2>
      <p class="problem-page-quote">"내가 먹고 있는 약들, 다 같이 먹어도 되는 걸까요?"</p>
      <p class="problem-page-answer"><span class="answer-risk">안 됩니다. 5개 이상 복용 시 약물 상호작용 위험이 약 <strong>80% 이상 증가하며,</strong><br /><span class="answer-risk-red">사망 위험이 4배 이상, 입원 비율이 2배 이상 높아집니다.</span></span></p>
      <div class="problem-page-ui">
        <img src="page1_ui.png" alt="메디가드 앱 UI - 상호작용 확인" />
      </div>
      <p class="problem-page-after-ui">메디가드는 여러 병원에서 받은 <strong>처방을 한 곳에 모아</strong> 관리하고, <strong>약물 상호작용 위험</strong>을 분석해 알려줍니다.<br />함께 먹으면 안 되는 조합이 있으면 바로 확인할 수 있어요.</p>
    </section>
    </div>

    <div class="page page-4">
    <section class="problem-page-section">
      <h2 class="problem-page-label">Problem</h2>
      <p class="problem-page-quote">"부모님 약이 늘 걱정인데, 매번 찾아갈 수도 없어요."</p>
      <p class="problem-page-answer"><span class="answer-risk">65세 이상 독거·부부 가구의 약 <strong>83%가 복약을 스스로 관리</strong>하지만,<br />보호자의 도움 없이 체계적인 복약 관리가 어려워 <span class="answer-risk-red">재입원률이 47%에 달합니다.</span></span></p>
      <div class="problem-page-ui">
        <img src="page1_ui.png" alt="메디가드 앱 UI - 가족 복약 공유" />
      </div>
      <p class="problem-page-after-ui">메디가드는 <strong>가족과 복약 현황을 공유</strong>할 수 있어요.<br />떨어져 있어도 부모님이 오늘 약을 드셨는지, 어떤 약을 쓰고 계신지 앱으로 실시간 확인할 수 있습니다.</p>
    </section>
    </div>

    <div class="page page-5">
    <section class="data-section">
      <div class="data-section-inner">
        <h2 class="data-heading">데이터로 복약을 관리합니다</h2>
        <p class="data-catchphrase">신뢰할 수 있는 데이터로, 더 안전한 복약 관리</p>
        <div class="data-circles">
          <div class="data-circle">
            <span class="data-circle-num">6만</span>
            <span class="data-circle-label">약물 데이터</span>
          </div>
          <div class="data-circle">
            <span class="data-circle-num">10만</span>
            <span class="data-circle-label">건강기능식품 및<br />영양제 데이터</span>
          </div>
          <div class="data-circle">
            <span class="data-circle-num">100만</span>
            <span class="data-circle-label data-circle-label-nowrap">약물 상호작용 데이터</span>
          </div>
        </div>
        <p class="data-body">실제 현장에서 사용되는 데이터로 현실성 있는 복약 관리를 실천합니다.</p>
        <p class="data-source">현재 약 120만건의 복약 데이터와 1000만건의 환자 임상 데이터 확보 및 연동 완료</p>
        <div class="data-search-btns">
          <button type="button" class="data-search-btn" id="open-drug-search">약물 검색하기</button>
          <button type="button" class="data-search-btn" id="open-supplement-search">영양제 검색하기</button>
        </div>
      </div>
    </section>
    </div>

    <div class="page page-6" id="report">
    <section class="problem-solution-section">
      <div class="ps-inner">
        <h2 class="ps-heading">서비스 작동 영상</h2>
        <div class="ps-media-group">
          <div class="ps-media-item">
            <div class="ps-media">
              <video class="ps-video" src="intro_video.mp4" controls playsinline></video>
            </div>
          </div>
          <span class="ps-media-arrow" aria-hidden="true">→</span>
          <div class="ps-media-item">
            <div class="ps-media">
              <video class="ps-video" src="intro_video.mp4" controls playsinline></video>
            </div>
          </div>
          <span class="ps-media-arrow" aria-hidden="true">→</span>
          <div class="ps-media-item">
            <div class="ps-media">
              <video class="ps-video" src="intro_video.mp4" controls playsinline></video>
            </div>
          </div>
        </div>
      </div>
    </section>
    </div>

    <div class="page page-7">
    <section class="event-section" id="event">
      <span class="event-badge">★ 선착순 50명 대상 베타 테스터 신청</span>
      <h2>인스타그램 팔로우 이벤트</h2>
      <p class="event-desc">이벤트 참여 방법을 안내해 드려요.</p>
      <div class="event-steps">
        <div class="event-step">
          <span class="step-num">STEP 01</span>
          <p class="step-text">메디가드 공식 인스타그램을 팔로우하고</p>
          <div class="mock-ui">
            Instagram @_mediguard<br />
            <span class="follow-btn">팔로우</span>
          </div>
        </div>
        <div class="event-step">
          <span class="step-num">STEP 02</span>
          <p class="step-text">DM으로 <strong>베타 테스터 신청</strong>이라고 보내주세요 ☺️</p>
          <div class="mock-ui">
            DM 대화
            <div class="dm-bubble">베타 테스터 신청</div>
          </div>
        </div>
      </div>
    </section>
    </div>
  </main>

  <div class="search-modal-overlay" id="drug-search-modal" aria-hidden="true">
    <div class="search-modal" onclick="event.stopPropagation()">
      <div class="search-modal-header">
        <h3 class="search-modal-title">약물 검색</h3>
        <button type="button" class="search-modal-close" id="close-drug-search" aria-label="닫기">×</button>
      </div>
      <div class="search-modal-body">
        <input type="text" class="search-modal-input" placeholder="약물명을 입력하세요" id="drug-search-input" autocomplete="off" />
        <div class="search-modal-results" id="drug-search-results" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <div class="search-modal-overlay" id="supplement-search-modal" aria-hidden="true">
    <div class="search-modal" onclick="event.stopPropagation()">
      <div class="search-modal-header">
        <h3 class="search-modal-title">영양제 검색</h3>
        <button type="button" class="search-modal-close" id="close-supplement-search" aria-label="닫기">×</button>
      </div>
      <div class="search-modal-body">
        <input type="text" class="search-modal-input" placeholder="영양제명을 입력하세요" id="supplement-search-input" autocomplete="off" />
        <div class="search-modal-results" id="supplement-search-results" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    (function () {
      /*
       * Supabase 연결 (URL, anon key, 테이블명)
       * - 브라우저에서 Supabase CDN 스크립트 로드 후 createClient(URL, anon key)로 클라이언트 생성
       * - 검색 시 supabase.from('테이블명').select().ilike('컬럼','%검색어%') 로 API 요청
       * - 연결 실패 시: 콘솔(F12) 확인. RLS 정책에서 anon 사용자의 SELECT 허용 필요.
       */
      var SUPABASE_URL = 'https://tixbbgxgsqtkhvttruawz.supabase.co';
      var SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpeGJiZ3hnc3F0a2h2dHJ1YXd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyMDkyNjQsImV4cCI6MjA3OTc4NTI2NH0.7CFV-QlDZqN9mWsmbvBKrAURwAo2fLmaduILtkYvAtQ';
      var DRUGS_TABLE = 'drugs';
      var SUPPLEMENTS_TABLE = 'health_foods';
      var DRUG_NAME_COLUMN = 'name';
      var SUPPLEMENT_NAME_COLUMN = '제품명';

      var supabase = null;
      try {
        var supabaseModule = window.supabase;
        if (supabaseModule && typeof supabaseModule.createClient === 'function') {
          supabase = supabaseModule.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        } else {
          console.warn('[MEDIGUARD] Supabase 스크립트가 로드되지 않았습니다. CDN 스크립트를 확인하세요.');
        }
      } catch (e) {
        console.error('[MEDIGUARD] Supabase 클라이언트 생성 실패:', e);
      }

      function renderResults(containerId, items, nameColumn) {
        var el = document.getElementById(containerId);
        if (!el) return;
        if (items === undefined || items === null || items.length === 0) {
          el.innerHTML = '<div class="search-modal-empty">검색 결과 없음</div>';
          return;
        }
        nameColumn = nameColumn || 'name';
        el.innerHTML = items.map(function (row) {
          var label = row[nameColumn] != null ? String(row[nameColumn]) : (row.item_name || row.product_name || JSON.stringify(row));
          return '<div class="search-modal-result-item">' + escapeHtml(label) + '</div>';
        }).join('');
      }

      function setLoading(containerId, loading) {
        var el = document.getElementById(containerId);
        if (!el) return;
        if (loading) el.innerHTML = '<div class="search-modal-loading">검색 중…</div>';
      }

      function setError(containerId, message) {
        var el = document.getElementById(containerId);
        if (!el) return;
        if (message && message.indexOf('fetch') !== -1) {
          message = '네트워크 요청이 차단되었습니다. 파일을 직접 열지 말고 로컬 서버로 실행하세요. (터미널에서 프로젝트 폴더로 이동 후: npx serve 또는 python -m http.server 8080)';
        }
        el.innerHTML = '<div class="search-modal-empty" style="color:#b91c1c;">' + escapeHtml(message) + '</div>';
      }

      function escapeHtml(s) {
        var div = document.createElement('div');
        div.textContent = s;
        return div.innerHTML;
      }

      function searchDrugs(query, done) {
        if (!query || query.length < 1) {
          done([]);
          return;
        }
        if (!supabase) {
          done(null, 'Supabase에 연결되지 않았습니다. 콘솔(F12)을 확인하세요.');
          return;
        }
        var col = DRUG_NAME_COLUMN;
        supabase.from(DRUGS_TABLE).select('*').ilike(col, '%' + query + '%').limit(30)
          .then(function (r) {
            if (r.error) {
              console.error('drugs search', r.error);
              done(null, r.error.message || '검색 오류');
            } else {
              done(r.data || []);
            }
          })
          .catch(function (err) {
            console.error('drugs search', err);
            done(null, err.message || '네트워크 오류');
          });
      }

      function searchSupplements(query, done) {
        if (!query || query.length < 1) {
          done([]);
          return;
        }
        if (!supabase) {
          done(null, 'Supabase에 연결되지 않았습니다. 콘솔(F12)을 확인하세요.');
          return;
        }
        var col = SUPPLEMENT_NAME_COLUMN;
        supabase.from(SUPPLEMENTS_TABLE).select('*').ilike(col, '%' + query + '%').limit(30)
          .then(function (r) {
            if (r.error) {
              console.error('supplements search', r.error);
              done(null, r.error.message || '검색 오류');
            } else {
              done(r.data || []);
            }
          })
          .catch(function (err) {
            console.error('supplements search', err);
            done(null, err.message || '네트워크 오류');
          });
      }

      function debounce(fn, ms) {
        var t;
        return function () {
          var a = arguments;
          clearTimeout(t);
          t = setTimeout(function () { fn.apply(null, a); }, ms);
        };
      }

      function bindSearchModal(overlayId, openBtnId, closeBtnId, inputId, resultsId, searchFn, nameColumn) {
        var overlay = document.getElementById(overlayId);
        var openBtn = document.getElementById(openBtnId);
        var closeBtn = document.getElementById(closeBtnId);
        var input = document.getElementById(inputId);
        var resultsEl = document.getElementById(resultsId);
        if (!overlay) return;

        var doSearch = debounce(function () {
          var q = (input && input.value) ? input.value.trim() : '';
          if (!resultsEl) return;
          if (q.length < 1) {
            renderResults(resultsId, []);
            return;
          }
          setLoading(resultsId, true);
          searchFn(q, function (items, errMsg) {
            setLoading(resultsId, false);
            if (errMsg) {
              setError(resultsId, errMsg);
              return;
            }
            renderResults(resultsId, items, nameColumn);
          });
        }, 320);

        if (input) input.addEventListener('input', doSearch);

        function openModal() {
          overlay.classList.add('is-open');
          overlay.setAttribute('aria-hidden', 'false');
          if (input) input.value = '';
          if (resultsEl) resultsEl.innerHTML = '';
          setTimeout(function () { if (input) input.focus(); }, 100);
        }
        function closeModal() {
          overlay.classList.remove('is-open');
          overlay.setAttribute('aria-hidden', 'true');
        }
        if (openBtn) openBtn.addEventListener('click', openModal);
        if (closeBtn) closeBtn.addEventListener('click', closeModal);
        overlay.addEventListener('click', function (e) { if (e.target === overlay) closeModal(); });
      }

      bindSearchModal('drug-search-modal', 'open-drug-search', 'close-drug-search', 'drug-search-input', 'drug-search-results', searchDrugs, DRUG_NAME_COLUMN);
      bindSearchModal('supplement-search-modal', 'open-supplement-search', 'close-supplement-search', 'supplement-search-input', 'supplement-search-results', searchSupplements, SUPPLEMENT_NAME_COLUMN);
    })();
  </script>
</body>
</html>
